<Window x:Class="TaxiGO.ClientWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:local="clr-namespace:TaxiGO"
        xmlns:gmaps="clr-namespace:GMap.NET.WindowsPresentation;assembly=GMap.NET.WindowsPresentation"
        Title="TaxiGO - Клиент" 
        Height="600" 
        MinHeight="500"
        Width="1000" 
        MinWidth="800"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" 
        AllowsTransparency="True" 
        Background="Transparent">
    <Window.Resources>
        <!-- Конвертер для видимости кнопки -->
        <local:StatusToVisibilityConverter x:Key="StatusToVisibilityConverter"/>
        <local:NullToTextConverter x:Key="NullToTextConverter"/>

        <!-- Анимации для переходов между вкладками (слайд) -->
        <Storyboard x:Key="SlideOutLeftAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" From="1" To="0.2" Duration="0:0:0.3"/>
            <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(TranslateTransform.X)" From="0" To="-50" Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseIn"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        <Storyboard x:Key="SlideInRightAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0.2" To="1" Duration="0:0:0.3"/>
            <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(TranslateTransform.X)" From="50" To="0" Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <!-- Стиль для боковой панели -->
        <Style x:Key="SidebarStyle" TargetType="Border">
            <Setter Property="Background" Value="#FF1E1E1E"/>
            <Setter Property="Visibility" Value="Visible"/>
        </Style>

        <!-- Стиль для кнопок навигации -->
        <Style x:Key="NavButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#FFD1D1D1"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Margin" Value="10,5"/>
            <Setter Property="Width" Value="50"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="ToolTipService.InitialShowDelay" Value="500"/>
            <Setter Property="ToolTipService.ShowDuration" Value="5000"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" Background="{TemplateBinding Background}" CornerRadius="25">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF3A3A3A" Offset="0"/>
                                            <GradientStop Color="#FF4A4A4A" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter TargetName="Border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#FF42A5F5" BlurRadius="15" ShadowDepth="0" Opacity="0.7"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="Border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.05" ScaleY="1.05" CenterX="25" CenterY="25"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF2A2A2A" Offset="0"/>
                                            <GradientStop Color="#FF3A3A3A" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="Tag" Value="Active">
                                <Setter TargetName="Border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF42A5F5" Offset="0"/>
                                            <GradientStop Color="#FF7C4DFF" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для кнопки "Выйти" -->
        <Style x:Key="LogoutButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#FFFF6B6B"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Margin" Value="10,5"/>
            <Setter Property="Width" Value="50"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="ToolTipService.InitialShowDelay" Value="500"/>
            <Setter Property="ToolTipService.ShowDuration" Value="5000"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" Background="{TemplateBinding Background}" CornerRadius="25" BorderBrush="#FFFF6B6B" BorderThickness="2">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#FFFF6B6B"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter TargetName="Border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#FFFF6B6B" BlurRadius="15" ShadowDepth="0" Opacity="0.7"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="Border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.05" ScaleY="1.05" CenterX="25" CenterY="25"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#FFCC5252"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для кнопок управления окном -->
        <Style x:Key="WindowControlButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#FF3A3A3A"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#FF4A4A4A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для кнопки закрытия -->
        <Style x:Key="CloseButtonStyle" TargetType="Button" BasedOn="{StaticResource WindowControlButtonStyle}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#FF8B0000"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#FF4A4A4A"/>
                            </Trigger>
                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <ContentPresenter Content="{Binding RelativeSource={RelativeSource AncestorType=ContentPresenter}, Path=Content}" Margin="-7,0,0,0"/>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </DataTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для основных кнопок -->
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#FF42A5F5"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="10,5"/>
            <Setter Property="Width" Value="120"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" Background="{TemplateBinding Background}" CornerRadius="20" BorderBrush="#FF42A5F5" BorderThickness="2">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF42A5F5" Offset="0"/>
                                            <GradientStop Color="#FF7C4DFF" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter TargetName="Border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#FF42A5F5" BlurRadius="15" ShadowDepth="0" Opacity="0.7"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="Border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.05" ScaleY="1.05" CenterX="60" CenterY="20"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF3A8FD1" Offset="0"/>
                                            <GradientStop Color="#FF673AB7" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для кнопок отмены -->
        <Style x:Key="CancelButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#FFFF6B6B"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="10,5"/>
            <Setter Property="Width" Value="120"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" Background="{TemplateBinding Background}" CornerRadius="20" BorderBrush="#FFFF6B6B" BorderThickness="2">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#FFFF6B6B"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter TargetName="Border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#FFFF6B6B" BlurRadius="15" ShadowDepth="0" Opacity="0.7"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="Border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.05" ScaleY="1.05" CenterX="60" CenterY="20"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#FFCC5252"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для кнопок управления картой -->
        <Style x:Key="MapControlButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#FF3A3A3A"/>
            <Setter Property="Foreground" Value="#FFE0E0E0"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Margin" Value="0,5,0,0"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
            <Setter Property="VerticalAlignment" Value="Top"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="ToolTipService.InitialShowDelay" Value="500"/>
            <Setter Property="ToolTipService.ShowDuration" Value="5000"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" Background="{TemplateBinding Background}" CornerRadius="20">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF42A5F5" Offset="0"/>
                                            <GradientStop Color="#FF7C4DFF" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter TargetName="Border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#FF42A5F5" BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="Border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.1" ScaleY="1.1" CenterX="20" CenterY="20"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF3A8FD1" Offset="0"/>
                                            <GradientStop Color="#FF673AB7" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для кнопки очистки карты -->
        <Style x:Key="MapClearButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#FF3A3A3A"/>
            <Setter Property="Foreground" Value="#FFFF6B6B"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Margin" Value="0,5,0,0"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
            <Setter Property="VerticalAlignment" Value="Top"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="ToolTipService.InitialShowDelay" Value="500"/>
            <Setter Property="ToolTipService.ShowDuration" Value="5000"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" Background="{TemplateBinding Background}" CornerRadius="20">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#FFFF6B6B"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter TargetName="Border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#FFFF6B6B" BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="Border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.1" ScaleY="1.1" CenterX="20" CenterY="20"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#FFCC5252"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для кнопки редактирования профиля -->
        <Style x:Key="EditButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#FF42A5F5"/>
            <!-- Голубоватый цвет -->
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Margin" Value="10,5"/>
            <Setter Property="Width" Value="50"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="ToolTipService.InitialShowDelay" Value="500"/>
            <Setter Property="ToolTipService.ShowDuration" Value="5000"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" Background="{TemplateBinding Background}" CornerRadius="25" BorderBrush="#FF42A5F5" BorderThickness="2">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF42A5F5" Offset="0"/>
                                            <GradientStop Color="#FF7C4DFF" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter TargetName="Border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#FF42A5F5" BlurRadius="15" ShadowDepth="0" Opacity="0.7"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="Border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.05" ScaleY="1.05" CenterX="25" CenterY="25"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF3A8FD1" Offset="0"/>
                                            <GradientStop Color="#FF673AB7" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для карточек заказов -->
        <Style x:Key="OrderCardStyle" TargetType="Border">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#FF1C2526" Offset="0"/>
                        <GradientStop Color="#FF2A3435" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush" Value="#FF424242"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="20"/>
            <Setter Property="Margin" Value="20,15"/>
            <Setter Property="Padding" Value="25"/>
            <Setter Property="Width" Value="600"/>
            <Setter Property="MaxWidth" Value="800"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#FF000000" BlurRadius="20" ShadowDepth="3" Opacity="0.5"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect Color="#FF42A5F5" BlurRadius="25" ShadowDepth="5" Opacity="0.7"/>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <TranslateTransform Y="-5"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
                <DataTrigger Binding="{Binding Status}" Value="Completed">
                    <Setter Property="BorderBrush" Value="#FF4CAF50"/>
                    <Setter Property="BorderThickness" Value="2"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Status}" Value="Pending">
                    <Setter Property="BorderBrush" Value="#FFFFC107"/>
                    <Setter Property="BorderThickness" Value="2"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Status}" Value="Canceled">
                    <Setter Property="BorderBrush" Value="#FFF44336"/>
                    <Setter Property="BorderThickness" Value="2"/>
                </DataTrigger>
                <!-- Адаптация к полноэкранному режиму -->
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                    <Setter Property="Width" Value="900"/>
                    <!-- Увеличена ширина -->
                    <Setter Property="MaxWidth" Value="1000"/>
                    <!-- Увеличен максимум -->
                    <Setter Property="Margin" Value="30,20"/>
                    <Setter Property="Padding" Value="35"/>
                    <!-- Увеличены внутренние отступы -->
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <!-- Стиль для TextBlock в карточках заказов -->
        <Style x:Key="OrderCardTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#FFB0B0B0"/>
            <Setter Property="Margin" Value="0,3,0,3"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                    <Setter Property="FontSize" Value="16"/>
                    <!-- Увеличен шрифт -->
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <!-- Основная разметка окна -->
    <Grid x:Name="MainGrid">
        <Grid.Clip>
            <RectangleGeometry RadiusX="20" RadiusY="20"/>
        </Grid.Clip>
        <Border x:Name="MainBorder" CornerRadius="20">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#FF1E1E1E" Offset="0"/>
                    <GradientStop Color="#FF2E2E2E" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition x:Name="SidebarColumn" Width="80"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Боковая панель -->
                <Border Style="{StaticResource SidebarStyle}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <!-- Заголовок -->
                        <TextBlock Text="TaxiGO" Foreground="#FFE0E0E0" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,20,0,20"/>
                        <!-- Кнопки навигации -->
                        <Grid Grid.Row="1">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Button x:Name="OrderTaxiNavButton" Grid.Row="0" Tag="Active" Click="NavButton_Click" Style="{StaticResource NavButtonStyle}" ToolTip="Заказать такси">
                                <materialDesign:PackIcon Kind="Taxi" Width="24" Height="24"/>
                            </Button>
                            <Button x:Name="OrderHistoryNavButton" Grid.Row="1" Click="NavButton_Click" Style="{StaticResource NavButtonStyle}" ToolTip="История заказов">
                                <materialDesign:PackIcon Kind="History" Width="24" Height="24"/>
                            </Button>
                            <Button x:Name="ProfileNavButton" Grid.Row="2" Click="NavButton_Click" Style="{StaticResource NavButtonStyle}" ToolTip="Профиль">
                                <materialDesign:PackIcon Kind="Account" Width="24" Height="24"/>
                            </Button>
                        </Grid>
                        <!-- Кнопка выхода -->
                        <Button Grid.Row="2" Style="{StaticResource LogoutButtonStyle}" Click="LogoutButton_Click" ToolTip="Выйти">
                            <materialDesign:PackIcon Kind="Logout" Width="24" Height="24"/>
                        </Button>
                    </Grid>
                </Border>

                <!-- Основное содержимое -->
                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#FF2A2A2A" Offset="0"/>
                            <GradientStop Color="#FF424242" Offset="1"/>
                        </LinearGradientBrush>
                    </Grid.Background>

                    <!-- Панель заголовка -->
                    <Border Background="#FF252525" BorderBrush="#FF42A5F5" BorderThickness="0,0,0,1" MouseDown="TitleBar_MouseDown">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <!-- Заголовок -->
                            <TextBlock x:Name="WelcomeText" Text="Заказать такси" Foreground="#FFE0E0E0" FontSize="20" FontWeight="Bold" Margin="20,10" VerticalAlignment="Center"/>
                            <!-- Кнопки управления окном -->
                            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                                <Button x:Name="MinimizeButton" Click="MinimizeButton_Click" Style="{StaticResource WindowControlButtonStyle}">
                                    <materialDesign:PackIcon Kind="WindowMinimize" Foreground="#FFD1D1D1" Width="16" Height="16"/>
                                </Button>
                                <Button x:Name="MaximizeRestoreButton" Click="MaximizeRestoreButton_Click" Style="{StaticResource WindowControlButtonStyle}">
                                    <materialDesign:PackIcon x:Name="MaximizeRestoreIcon" Kind="WindowMaximize" Foreground="#FFD1D1D1" Width="16" Height="16"/>
                                </Button>
                                <Button x:Name="CloseButton" Click="CloseButton_Click" Style="{StaticResource CloseButtonStyle}">
                                    <materialDesign:PackIcon Kind="Close" Foreground="#FFD1D1D1" Width="16" Height="16" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Button>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Содержимое -->
                    <Grid Grid.Row="1" Margin="20">
                        <!-- Вкладка "Заказать такси" -->
                        <Grid x:Name="OrderTaxiPanel" Opacity="1" Visibility="Visible">
                            <Grid.RenderTransform>
                                <TranslateTransform X="0"/>
                            </Grid.RenderTransform>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Карта -->
                            <Border Grid.Column="0" CornerRadius="15" Margin="0,0,10,0">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#FF3A3A3A" Offset="0"/>
                                        <GradientStop Color="#FF2E2E2E" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.Effect>
                                    <DropShadowEffect Color="#FF42A5F5" BlurRadius="10" ShadowDepth="0" Opacity="0.3"/>
                                </Border.Effect>
                                <Grid>
                                    <gmaps:GMapControl x:Name="MapControl" MouseLeftButtonDown="MapControl_MouseLeftButtonDown" />
                                    <!-- Загрузочный оверлей -->
                                    <Grid x:Name="LoadingOverlay" Background="#CC1A2526" Visibility="Collapsed">
                                        <Border Background="#FF2C3E50" CornerRadius="15" Padding="20" Width="150" Height="150" HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <Border.Effect>
                                                <DropShadowEffect Color="#FF42A5F5" BlurRadius="15" ShadowDepth="0" Opacity="0.5"/>
                                            </Border.Effect>
                                            <Grid>
                                                <Ellipse Width="80" Height="80" Stroke="#FF42A5F5" StrokeThickness="6" Opacity="0.3"/>
                                                <Ellipse Width="80" Height="80" Stroke="#FF42A5F5" StrokeThickness="6" StrokeDashArray="5,5">
                                                    <Ellipse.RenderTransform>
                                                        <RotateTransform CenterX="40" CenterY="40"/>
                                                    </Ellipse.RenderTransform>
                                                    <Ellipse.Triggers>
                                                        <EventTrigger RoutedEvent="Loaded">
                                                            <BeginStoryboard>
                                                                <Storyboard>
                                                                    <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(RotateTransform.Angle)" From="0" To="360" Duration="0:0:1.5" RepeatBehavior="Forever">
                                                                        <DoubleAnimation.EasingFunction>
                                                                            <SineEase EasingMode="EaseInOut"/>
                                                                        </DoubleAnimation.EasingFunction>
                                                                    </DoubleAnimation>
                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </EventTrigger>
                                                    </Ellipse.Triggers>
                                                </Ellipse>
                                                <materialDesign:PackIcon Kind="Taxi" Width="40" Height="40" Foreground="#FF42A5F5" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                    <materialDesign:PackIcon.RenderTransform>
                                                        <ScaleTransform CenterX="20" CenterY="20"/>
                                                    </materialDesign:PackIcon.RenderTransform>
                                                    <materialDesign:PackIcon.Triggers>
                                                        <EventTrigger RoutedEvent="Loaded">
                                                            <BeginStoryboard>
                                                                <Storyboard>
                                                                    <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleX)" From="1" To="1.2" Duration="0:0:0.8" AutoReverse="True" RepeatBehavior="Forever">
                                                                        <DoubleAnimation.EasingFunction>
                                                                            <SineEase EasingMode="EaseInOut"/>
                                                                        </DoubleAnimation.EasingFunction>
                                                                    </DoubleAnimation>
                                                                    <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleY)" From="1" To="1.2" Duration="0:0:0.8" AutoReverse="True" RepeatBehavior="Forever">
                                                                        <DoubleAnimation.EasingFunction>
                                                                            <SineEase EasingMode="EaseInOut"/>
                                                                        </DoubleAnimation.EasingFunction>
                                                                    </DoubleAnimation>
                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </EventTrigger>
                                                    </materialDesign:PackIcon.Triggers>
                                                </materialDesign:PackIcon>
                                                <TextBlock Text="Загрузка..." Foreground="#FF42A5F5" FontSize="14" FontWeight="Medium" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,10"/>
                                            </Grid>
                                        </Border>
                                    </Grid>
                                    <!-- Панель управления картой -->
                                    <StackPanel Orientation="Vertical" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="10">
                                        <Button x:Name="ZoomInButton" Click="ZoomInButton_Click" Style="{StaticResource MapControlButtonStyle}" ToolTip="Приблизить">
                                            <materialDesign:PackIcon Kind="Plus" Width="20" Height="20"/>
                                        </Button>
                                        <Button x:Name="ZoomOutButton" Click="ZoomOutButton_Click" Style="{StaticResource MapControlButtonStyle}" ToolTip="Отдалить">
                                            <materialDesign:PackIcon Kind="Minus" Width="20" Height="20"/>
                                        </Button>
                                        <Button x:Name="ClearMapButton" Click="ClearMapButton_Click" Style="{StaticResource MapClearButtonStyle}" ToolTip="Очистить карту">
                                            <materialDesign:PackIcon Kind="Delete" Width="20" Height="20"/>
                                        </Button>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- Форма заказа -->
                            <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" Padding="0,0,15,0">
                                <Border Background="#AA2E2E2E" CornerRadius="15" Margin="0,0,0,0">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FF42A5F5" BlurRadius="10" ShadowDepth="0" Opacity="0.3"/>
                                    </Border.Effect>
                                    <StackPanel x:Name="OrderFormPanel" Width="350" Margin="15,15,15,15">
                                        <!-- Откуда -->
                                        <Grid Margin="0,0,0,15">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <materialDesign:PackIcon Kind="MapMarker" Width="24" Height="24" Foreground="#FF888888" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                            <TextBox x:Name="StartPoint" Grid.Column="1"
                             Height="56"
                             FontSize="16"
                             Foreground="#FFFFFFFF"
                             materialDesign:HintAssist.Hint="Откуда"
                             materialDesign:HintAssist.Foreground="#FF888888"
                             materialDesign:HintAssist.FloatingOffset="0,-20"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             TextChanged="StartPoint_TextChanged">
                                                <TextBox.Resources>
                                                    <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                        <Setter Property="CaretBrush" Value="#FF42A5F5"/>
                                                        <Setter Property="SelectionBrush" Value="#FF42A5F5"/>
                                                        <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                                        <Setter Property="BorderBrush" Value="#FF888888"/>
                                                        <Setter Property="Background" Value="#FF2E2E2E"/>
                                                        <Setter Property="Padding" Value="0,0,10,0"/>
                                                        <Style.Triggers>
                                                            <Trigger Property="IsFocused" Value="True">
                                                                <Setter Property="BorderBrush" Value="#FF42A5F5"/>
                                                                <Setter Property="BorderThickness" Value="0,0,0,3"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBox.Resources>
                                            </TextBox>
                                            <Button Grid.Column="2" x:Name="SelectStartPointButton" Click="SelectStartPointButton_Click" Style="{StaticResource EditButtonStyle}" ToolTip="Выбрать на карте" Width="40" Height="40" Margin="5,0,0,0">
                                                <materialDesign:PackIcon Kind="MapMarkerRadius" Width="20" Height="20"/>
                                            </Button>
                                        </Grid>

                                        <!-- Куда -->
                                        <Grid Margin="0,0,0,15">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <materialDesign:PackIcon Kind="MapMarkerCheck" Width="24" Height="24" Foreground="#FF888888" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                            <TextBox x:Name="EndPoint" Grid.Column="1"
                                                     Height="56"
                                                     FontSize="16"
                                                     Foreground="#FFFFFFFF"
                                                     materialDesign:HintAssist.Hint="Куда"
                                                     materialDesign:HintAssist.Foreground="#FF888888"
                                                     materialDesign:HintAssist.FloatingOffset="0,-20"
                                                     Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                                     TextChanged="EndPoint_TextChanged">
                                                <TextBox.Resources>
                                                    <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                        <Setter Property="CaretBrush" Value="#FF42A5F5"/>
                                                        <Setter Property="SelectionBrush" Value="#FF42A5F5"/>
                                                        <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                                        <Setter Property="BorderBrush" Value="#FF888888"/>
                                                        <Setter Property="Background" Value="#FF2E2E2E"/>
                                                        <Setter Property="Padding" Value="0,0,10,0"/>
                                                        <Style.Triggers>
                                                            <Trigger Property="IsFocused" Value="True">
                                                                <Setter Property="BorderBrush" Value="#FF42A5F5"/>
                                                                <Setter Property="BorderThickness" Value="0,0,0,3"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBox.Resources>
                                            </TextBox>
                                            <Button Grid.Column="2" x:Name="SelectEndPointButton" Click="SelectEndPointButton_Click" Style="{StaticResource EditButtonStyle}" ToolTip="Выбрать на карте" Width="40" Height="40" Margin="5,0,0,0">
                                                <materialDesign:PackIcon Kind="FlagCheckered" Width="20" Height="20"/>
                                            </Button>
                                        </Grid>

                                        <!-- Тариф -->
                                        <Grid Margin="0,0,0,15">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <materialDesign:PackIcon Kind="Car" Width="24" Height="24" Foreground="#FF888888" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                            <ComboBox x:Name="TariffCombo" Grid.Column="1"
                              Height="56"
                              FontSize="16"
                              Foreground="#FFFFFFFF"
                              materialDesign:HintAssist.Hint="Тариф"
                              materialDesign:HintAssist.Foreground="#FF888888"
                              materialDesign:HintAssist.FloatingOffset="0,-20"
                              DisplayMemberPath="Name"
                              Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                              SelectionChanged="TariffCombo_SelectionChanged">
                                                <ComboBox.Resources>
                                                    <Style TargetType="ComboBox" BasedOn="{StaticResource MaterialDesignFloatingHintComboBox}">
                                                        <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                                        <Setter Property="BorderBrush" Value="#FF888888"/>
                                                        <Setter Property="Background" Value="#FF2E2E2E"/>
                                                        <Setter Property="Padding" Value="0,0,10,0"/>
                                                        <Style.Triggers>
                                                            <Trigger Property="IsFocused" Value="True">
                                                                <Setter Property="BorderBrush" Value="#FF42A5F5"/>
                                                                <Setter Property="BorderThickness" Value="0,0,0,3"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </ComboBox.Resources>
                                            </ComboBox>
                                        </Grid>

                                        <!-- Промокод -->
                                        <Grid Margin="0,0,0,15">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <materialDesign:PackIcon Kind="Ticket" Width="24" Height="24" Foreground="#FF888888" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                            <TextBox x:Name="PromoCodeTextBox" Grid.Column="1"
                             Width="200"
                             Height="56"
                             FontSize="16"
                             Foreground="#FFFFFFFF"
                             materialDesign:HintAssist.Hint="Промокод"
                             materialDesign:HintAssist.Foreground="#FF888888"
                             materialDesign:HintAssist.FloatingOffset="0,-20"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             TextChanged="PromoCodeTextBox_TextChanged">
                                                <TextBox.Resources>
                                                    <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                        <Setter Property="CaretBrush" Value="#FF42A5F5"/>
                                                        <Setter Property="SelectionBrush" Value="#FF42A5F5"/>
                                                        <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                                        <Setter Property="BorderBrush" Value="#FF888888"/>
                                                        <Setter Property="Background" Value="#FF2E2E2E"/>
                                                        <Setter Property="Padding" Value="0,0,10,0"/>
                                                        <Style.Triggers>
                                                            <Trigger Property="IsFocused" Value="True">
                                                                <Setter Property="BorderBrush" Value="#FF42A5F5"/>
                                                                <Setter Property="BorderThickness" Value="0,0,0,3"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBox.Resources>
                                            </TextBox>
                                            <Button Grid.Column="2" x:Name="ApplyPromoCodeButton" Content="Применить" Width="120" Height="30" Margin="10,0,0,0" Click="ApplyPromoCode_Click" Style="{StaticResource ActionButtonStyle}"/>
                                        </Grid>

                                        <!-- Расстояние -->
                                        <Grid Margin="0,0,0,15">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <materialDesign:PackIcon Kind="Ruler" Width="24" Height="24" Foreground="#FF888888" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                            <TextBox x:Name="DistanceTextBox" Grid.Column="1"
                             Height="56"
                             FontSize="16"
                             Foreground="#FFFFFFFF"
                             materialDesign:HintAssist.Hint="Расстояние (км)"
                             materialDesign:HintAssist.Foreground="#FF888888"
                             materialDesign:HintAssist.FloatingOffset="0,-20"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             IsReadOnly="True">
                                                <TextBox.Resources>
                                                    <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                        <Setter Property="CaretBrush" Value="#FF42A5F5"/>
                                                        <Setter Property="SelectionBrush" Value="#FF42A5F5"/>
                                                        <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                                        <Setter Property="BorderBrush" Value="#FF888888"/>
                                                        <Setter Property="Background" Value="#FF2E2E2E"/>
                                                        <Setter Property="Padding" Value="0,0,10,0"/>
                                                        <Style.Triggers>
                                                            <Trigger Property="IsFocused" Value="True">
                                                                <Setter Property="BorderBrush" Value="#FF42A5F5"/>
                                                                <Setter Property="BorderThickness" Value="0,0,0,3"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBox.Resources>
                                            </TextBox>
                                        </Grid>

                                        <!-- Время ожидания -->
                                        <Grid Margin="0,0,0,15">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <materialDesign:PackIcon Kind="Clock" Width="24" Height="24" Foreground="#FF888888" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                            <TextBox x:Name="WaitingTimeTextBox" Grid.Column="1"
                             Height="56"
                             FontSize="16"
                             Foreground="#FFFFFFFF"
                             materialDesign:HintAssist.Hint="Время ожидания (мин)"
                             materialDesign:HintAssist.Foreground="#FF888888"
                             materialDesign:HintAssist.FloatingOffset="0,-20"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             TextChanged="WaitingTimeTextBox_TextChanged">
                                                <TextBox.Resources>
                                                    <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                        <Setter Property="CaretBrush" Value="#FF42A5F5"/>
                                                        <Setter Property="SelectionBrush" Value="#FF42A5F5"/>
                                                        <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                                        <Setter Property="BorderBrush" Value="#FF888888"/>
                                                        <Setter Property="Background" Value="#FF2E2E2E"/>
                                                        <Setter Property="Padding" Value="0,0,10,0"/>
                                                        <Style.Triggers>
                                                            <Trigger Property="IsFocused" Value="True">
                                                                <Setter Property="BorderBrush" Value="#FF42A5F5"/>
                                                                <Setter Property="BorderThickness" Value="0,0,0,3"/>
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBox.Resources>
                                            </TextBox>
                                        </Grid>

                                        <!-- Стоимость поездки -->
                                        <Grid Margin="0,0,0,15">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <materialDesign:PackIcon Kind="CurrencyRub" Width="24" Height="24" Foreground="#FF888888" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                            <TextBlock x:Name="CostTextBlock" Grid.Column="1" Text="Стоимость: 0 ₽" FontSize="16" Foreground="#FFE0E0E0" VerticalAlignment="Center"/>
                                        </Grid>

                                        <!-- Кнопка расчёта стоимости -->
                                        <Button x:Name="CalculateCostButton" Content="Рассчитать стоимость" Width="200" Height="40" Margin="0,30,0,15" Click="CalculateCost_Click" Style="{StaticResource ActionButtonStyle}"/>

                                        <!-- Кнопка заказа -->
                                        <Button x:Name="OrderButton" Content="Заказать" Width="200" Height="40" Margin="0,15,0,30" Click="OrderTaxi_Click" Style="{StaticResource ActionButtonStyle}"/>
                                    </StackPanel>
                                </Border>
                            </ScrollViewer>
                        </Grid>

                        <!-- Вкладка "История заказов" -->
                        <Grid x:Name="OrderHistoryPanel" Opacity="0" Visibility="Hidden">
                            <Grid.RenderTransform>
                                <TranslateTransform X="0"/>
                            </Grid.RenderTransform>
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <ItemsControl x:Name="OrderHistoryList">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Style="{StaticResource OrderCardStyle}">
                                                <Border.RenderTransform>
                                                    <TranslateTransform X="0" Y="0"/>
                                                </Border.RenderTransform>
                                                <Border.Triggers>
                                                    <EventTrigger RoutedEvent="Loaded">
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.4"/>
                                                                <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(TranslateTransform.X)" From="30" To="0" Duration="0:0:0.4">
                                                                    <DoubleAnimation.EasingFunction>
                                                                        <SineEase EasingMode="EaseOut"/>
                                                                    </DoubleAnimation.EasingFunction>
                                                                </DoubleAnimation>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                    <EventTrigger RoutedEvent="MouseEnter">
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(TranslateTransform.Y)" From="0" To="-5" Duration="0:0:0.2">
                                                                    <DoubleAnimation.EasingFunction>
                                                                        <SineEase EasingMode="EaseOut"/>
                                                                    </DoubleAnimation.EasingFunction>
                                                                </DoubleAnimation>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                    <EventTrigger RoutedEvent="MouseLeave">
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(TranslateTransform.Y)" From="-5" To="0" Duration="0:0:0.2">
                                                                    <DoubleAnimation.EasingFunction>
                                                                        <SineEase EasingMode="EaseIn"/>
                                                                    </DoubleAnimation.EasingFunction>
                                                                </DoubleAnimation>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                </Border.Triggers>
                                                <Grid>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <!-- Заголовок и статус -->
                                                    <Grid Grid.Row="0" Margin="0,0,0,20">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <materialDesign:PackIcon Kind="Taxi" Width="28" Height="28" Foreground="#FF42A5F5" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                                            <TextBlock Text="{Binding OrderId, StringFormat=Заказ #{0}}" FontSize="18" FontWeight="Bold" Foreground="#FFE0E0E0"/>
                                                            <Border Margin="12,0,0,0" Padding="10,3" CornerRadius="8">
                                                                <Border.Style>
                                                                    <Style TargetType="Border">
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding Status}" Value="Completed">
                                                                                <Setter Property="Background" Value="#FF4CAF50"/>
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding Status}" Value="Pending">
                                                                                <Setter Property="Background" Value="#FFFFC107"/>
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding Status}" Value="Canceled">
                                                                                <Setter Property="Background" Value="#FFF44336"/>
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Border.Style>
                                                                <TextBlock FontSize="14" FontWeight="SemiBold" VerticalAlignment="Center">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="Foreground" Value="White"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding Status}" Value="Completed">
                                                                                    <Setter Property="Text" Value="Завершён"/>
                                                                                </DataTrigger>
                                                                                <DataTrigger Binding="{Binding Status}" Value="Pending">
                                                                                    <Setter Property="Text" Value="В ожидании"/>
                                                                                    <Setter Property="Foreground" Value="#FF333333"/>
                                                                                </DataTrigger>
                                                                                <DataTrigger Binding="{Binding Status}" Value="Canceled">
                                                                                    <Setter Property="Text" Value="Отменён"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                            </Border>
                                                        </StackPanel>
                                                        <TextBlock Grid.Column="2" Text="{Binding OrderTime, StringFormat={}{0:dd.MM.yyyy HH:mm}}" FontSize="16" Foreground="#FFB0B0B0" VerticalAlignment="Center"/>
                                                    </Grid>
                                                    <!-- Основная информация -->
                                                    <Grid Grid.Row="1" Margin="0,0,0,20">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>
                                                        <!-- Левая колонка -->
                                                        <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                                            <Grid Margin="0,0,0,8">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <materialDesign:PackIcon Kind="MapMarker" Width="20" Height="20" Foreground="#FF42A5F5" VerticalAlignment="Center" Margin="0,0,10,0">
                                                                    <materialDesign:PackIcon.Style>
                                                                        <Style TargetType="materialDesign:PackIcon">
                                                                            <Setter Property="Width" Value="20"/>
                                                                            <Setter Property="Height" Value="20"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                                                                    <Setter Property="Width" Value="24"/>
                                                                                    <Setter Property="Height" Value="24"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </materialDesign:PackIcon.Style>
                                                                </materialDesign:PackIcon>
                                                                <TextBlock Grid.Column="1" Text="{Binding StartPoint, StringFormat=От: {0}}" Style="{StaticResource OrderCardTextStyle}"/>
                                                            </Grid>
                                                            <Grid Margin="0,0,0,8">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <materialDesign:PackIcon Kind="MapMarkerCheck" Width="20" Height="20" Foreground="#FF42A5F5" VerticalAlignment="Center" Margin="0,0,10,0">
                                                                    <materialDesign:PackIcon.Style>
                                                                        <Style TargetType="materialDesign:PackIcon">
                                                                            <Setter Property="Width" Value="20"/>
                                                                            <Setter Property="Height" Value="20"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                                                                    <Setter Property="Width" Value="24"/>
                                                                                    <Setter Property="Height" Value="24"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </materialDesign:PackIcon.Style>
                                                                </materialDesign:PackIcon>
                                                                <TextBlock Grid.Column="1" Text="{Binding EndPoint, StringFormat=До: {0}}" Style="{StaticResource OrderCardTextStyle}"/>
                                                            </Grid>
                                                            <Grid Margin="0,0,0,8">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <materialDesign:PackIcon Kind="Car" Width="20" Height="20" Foreground="#FF42A5F5" VerticalAlignment="Center" Margin="0,0,10,0">
                                                                    <materialDesign:PackIcon.Style>
                                                                        <Style TargetType="materialDesign:PackIcon">
                                                                            <Setter Property="Width" Value="20"/>
                                                                            <Setter Property="Height" Value="20"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                                                                    <Setter Property="Width" Value="24"/>
                                                                                    <Setter Property="Height" Value="24"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </materialDesign:PackIcon.Style>
                                                                </materialDesign:PackIcon>
                                                                <TextBlock Grid.Column="1" Text="{Binding Tariff.Name, StringFormat=Тариф: {0}}" Style="{StaticResource OrderCardTextStyle}"/>
                                                            </Grid>
                                                            <Grid Margin="0,0,0,8" Visibility="{Binding Status, Converter={StaticResource StatusToVisibilityConverter}, ConverterParameter=NotCanceled}">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <materialDesign:PackIcon Kind="Ruler" Width="20" Height="20" Foreground="#FF42A5F5" VerticalAlignment="Center" Margin="0,0,10,0">
                                                                    <materialDesign:PackIcon.Style>
                                                                        <Style TargetType="materialDesign:PackIcon">
                                                                            <Setter Property="Width" Value="20"/>
                                                                            <Setter Property="Height" Value="20"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                                                                    <Setter Property="Width" Value="24"/>
                                                                                    <Setter Property="Height" Value="24"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </materialDesign:PackIcon.Style>
                                                                </materialDesign:PackIcon>
                                                                <TextBlock Grid.Column="1" Text="{Binding DistanceKm, StringFormat=Расстояние: {0:F2} км, Converter={StaticResource NullToTextConverter}, ConverterParameter='Не указано'}" Style="{StaticResource OrderCardTextStyle}"/>
                                                            </Grid>
                                                        </StackPanel>
                                                        <!-- Правая колонка -->
                                                        <StackPanel Grid.Column="1">
                                                            <Grid Margin="0,0,0,8" Visibility="{Binding Status, Converter={StaticResource StatusToVisibilityConverter}, ConverterParameter=NotCanceled}">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <materialDesign:PackIcon Kind="Account" Width="20" Height="20" Foreground="#FF42A5F5" VerticalAlignment="Center" Margin="0,0,10,0">
                                                                    <materialDesign:PackIcon.Style>
                                                                        <Style TargetType="materialDesign:PackIcon">
                                                                            <Setter Property="Width" Value="20"/>
                                                                            <Setter Property="Height" Value="20"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                                                                    <Setter Property="Width" Value="24"/>
                                                                                    <Setter Property="Height" Value="24"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </materialDesign:PackIcon.Style>
                                                                </materialDesign:PackIcon>
                                                                <TextBlock Grid.Column="1" Text="{Binding Driver.Name, StringFormat=Водитель: {0}, Converter={StaticResource NullToTextConverter}, ConverterParameter='Не назначен'}" Style="{StaticResource OrderCardTextStyle}"/>
                                                            </Grid>
                                                            <Grid Margin="0,0,0,8" Visibility="{Binding Status, Converter={StaticResource StatusToVisibilityConverter}, ConverterParameter=NotCanceled}">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <materialDesign:PackIcon Kind="CarHatchback" Width="20" Height="20" Foreground="#FF42A5F5" VerticalAlignment="Center" Margin="0,0,10,0">
                                                                    <materialDesign:PackIcon.Style>
                                                                        <Style TargetType="materialDesign:PackIcon">
                                                                            <Setter Property="Width" Value="20"/>
                                                                            <Setter Property="Height" Value="20"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                                                                    <Setter Property="Width" Value="24"/>
                                                                                    <Setter Property="Height" Value="24"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </materialDesign:PackIcon.Style>
                                                                </materialDesign:PackIcon>
                                                                <TextBlock Grid.Column="1" Text="{Binding Driver.Vehicle.Model, StringFormat=Автомобиль: {0}, Converter={StaticResource NullToTextConverter}, ConverterParameter='Не указано'}" Style="{StaticResource OrderCardTextStyle}"/>
                                                            </Grid>
                                                            <Grid Margin="0,0,0,8" Visibility="{Binding Status, Converter={StaticResource StatusToVisibilityConverter}, ConverterParameter=Completed}">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <materialDesign:PackIcon Kind="Star" Width="20" Height="20" Foreground="#FF42A5F5" VerticalAlignment="Center" Margin="0,0,10,0">
                                                                    <materialDesign:PackIcon.Style>
                                                                        <Style TargetType="materialDesign:PackIcon">
                                                                            <Setter Property="Width" Value="20"/>
                                                                            <Setter Property="Height" Value="20"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                                                                    <Setter Property="Width" Value="24"/>
                                                                                    <Setter Property="Height" Value="24"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </materialDesign:PackIcon.Style>
                                                                </materialDesign:PackIcon>
                                                                <TextBlock Grid.Column="1" Text="{Binding ClientRating, StringFormat=Рейтинг: {0}, Converter={StaticResource NullToTextConverter}, ConverterParameter='Не оценено'}" Style="{StaticResource OrderCardTextStyle}"/>
                                                            </Grid>
                                                            <Grid Margin="0,0,0,8" Visibility="{Binding Status, Converter={StaticResource StatusToVisibilityConverter}, ConverterParameter=Completed}">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <materialDesign:PackIcon Kind="Comment" Width="20" Height="20" Foreground="#FF42A5F5" VerticalAlignment="Center" Margin="0,0,10,0">
                                                                    <materialDesign:PackIcon.Style>
                                                                        <Style TargetType="materialDesign:PackIcon">
                                                                            <Setter Property="Width" Value="20"/>
                                                                            <Setter Property="Height" Value="20"/>
                                                                            <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                                                                    <Setter Property="Width" Value="24"/>
                                                                                    <Setter Property="Height" Value="24"/>
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </materialDesign:PackIcon.Style>
                                                                </materialDesign:PackIcon>
                                                                <TextBlock Grid.Column="1" Text="{Binding ClientComment, StringFormat=Комментарий: {0}, Converter={StaticResource NullToTextConverter}, ConverterParameter='Нет комментария'}" Style="{StaticResource OrderCardTextStyle}"/>
                                                            </Grid>
                                                        </StackPanel>
                                                    </Grid>
                                                    <!-- Кнопки и стоимость -->
                                                    <Grid Grid.Row="2" Margin="0,0,0,20">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <!-- Стоимость -->
                                                        <Grid Grid.Column="0" Visibility="{Binding Status, Converter={StaticResource StatusToVisibilityConverter}, ConverterParameter=NotCanceled}" VerticalAlignment="Center">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="*"/>
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock Grid.Column="1" Text="{Binding Cost, StringFormat=Стоимость: {0:F2} ₽, Converter={StaticResource NullToTextConverter}, ConverterParameter='Не рассчитано'}">
                                                                <TextBlock.Style>
                                                                    <Style TargetType="TextBlock">
                                                                        <Setter Property="FontSize" Value="16"/>
                                                                        <Setter Property="Foreground" Value="#FFFFC107"/>
                                                                        <Setter Property="FontWeight" Value="Bold"/>
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                                                                <Setter Property="FontSize" Value="18"/>
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </TextBlock.Style>
                                                            </TextBlock>
                                                        </Grid>
                                                        <!-- Кнопки -->
                                                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                            <Button Click="CancelOrder_Click" Tag="{Binding OrderId}" Content="Отменить" Visibility="{Binding Status, Converter={StaticResource StatusToVisibilityConverter}, ConverterParameter=Pending}">
                                                                <Button.Style>
                                                                    <Style TargetType="Button" BasedOn="{StaticResource CancelButtonStyle}">
                                                                        <Setter Property="Width" Value="120"/>
                                                                        <Setter Property="Height" Value="40"/>
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window},	Path=WindowState}" Value="Maximized">
                                                                                <Setter Property="Width" Value="140"/>
                                                                                <Setter Property="Height" Value="45"/>
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Button.Style>
                                                            </Button>
                                                            <Button Click="RateDriver_Click" Tag="{Binding OrderId}" Content="Оценить" Visibility="{Binding Status, Converter={StaticResource StatusToVisibilityConverter}, ConverterParameter=Completed}">
                                                                <Button.Style>
                                                                    <Style TargetType="Button" BasedOn="{StaticResource ActionButtonStyle}">
                                                                        <Setter Property="Width" Value="120"/>
                                                                        <Setter Property="Height" Value="40"/>
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                                                                <Setter Property="Width" Value="140"/>
                                                                                <Setter Property="Height" Value="45"/>
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Button.Style>
                                                            </Button>
                                                        </StackPanel>
                                                    </Grid>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </Grid>

                        <!-- Вкладка "Профиль" -->
                        <Grid x:Name="ProfilePanel" Opacity="0" Visibility="Hidden">
                            <Grid.RenderTransform>
                                <TranslateTransform X="0"/>
                            </Grid.RenderTransform>
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Border x:Name="ProfileCard" CornerRadius="20" Margin="20" Padding="20">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FF2E2E2E" Offset="0"/>
                                            <GradientStop Color="#FF3A3A3A" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FF42A5F5" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
                                    </Border.Effect>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        <!-- Аватарка и имя -->
                                        <Grid Grid.Row="0" Margin="0,0,0,20">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <!-- Аватарка -->
                                            <Grid Grid.Column="0" Margin="0,0,20,0">
                                                <Border x:Name="AvatarBorder" Width="120" Height="120" CornerRadius="60">
                                                    <Border.Background>
                                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                            <GradientStop Color="#FF42A5F5" Offset="0"/>
                                                            <GradientStop Color="#FF7C4DFF" Offset="1"/>
                                                        </LinearGradientBrush>
                                                    </Border.Background>
                                                    <Border.Effect>
                                                        <DropShadowEffect Color="#FF42A5F5" BlurRadius="15" ShadowDepth="0" Opacity="0.7"/>
                                                    </Border.Effect>
                                                    <Image x:Name="AvatarImage" Stretch="UniformToFill">
                                                        <Image.Clip>
                                                            <EllipseGeometry RadiusX="60" RadiusY="60" Center="60,60"/>
                                                        </Image.Clip>
                                                    </Image>
                                                </Border>
                                                <materialDesign:PackIcon Kind="Account" Width="60" Height="60" Foreground="#FFE0E0E0" HorizontalAlignment="Center" VerticalAlignment="Center" x:Name="AvatarPlaceholder" Visibility="Visible"/>
                                                <Button x:Name="UploadAvatarButton" Width="120" Height="120" Background="Transparent" BorderThickness="0" Click="UploadAvatar_Click">
                                                    <Button.Template>
                                                        <ControlTemplate TargetType="Button">
                                                            <Grid>
                                                                <Border x:Name="AvatarGlow" Width="120" Height="120" CornerRadius="60" BorderBrush="#FFE0E0E0" BorderThickness="3" Opacity="0">
                                                                    <Border.Effect>
                                                                        <DropShadowEffect Color="#FFE0E0E0" BlurRadius="15" ShadowDepth="0" Opacity="0.7"/>
                                                                    </Border.Effect>
                                                                </Border>
                                                                <Border Background="{TemplateBinding Background}" CornerRadius="60">
                                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                </Border>
                                                            </Grid>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter TargetName="AvatarGlow" Property="Opacity" Value="1"/>
                                                                    <Setter Property="RenderTransform">
                                                                        <Setter.Value>
                                                                            <ScaleTransform ScaleX="1.05" ScaleY="1.05" CenterX="60" CenterY="60"/>
                                                                        </Setter.Value>
                                                                    </Setter>
                                                                </Trigger>
                                                                <Trigger Property="IsMouseOver" Value="False">
                                                                    <Setter TargetName="AvatarGlow" Property="Opacity" Value="0"/>
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Button.Template>
                                                </Button>
                                            </Grid>
                                            <!-- Имя -->
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                <TextBlock x:Name="ProfileHeader" FontSize="24" FontWeight="Bold" Foreground="#FFE0E0E0" Margin="0,0,0,10">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="FontSize" Value="24"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                                                    <Setter Property="FontSize" Value="28"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                                <TextBlock Text="Клиент" FontSize="16" Foreground="#FF888888">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="FontSize" Value="16"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=WindowState}" Value="Maximized">
                                                                    <Setter Property="FontSize" Value="18"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </StackPanel>
                                            <!-- Кнопки редактирования и сброса пароля -->
                                            <StackPanel Grid.Column="2" Orientation="Vertical" VerticalAlignment="Center">
                                                <Button x:Name="EditProfileButton" Width="50" Height="50" Click="EditProfile_Click" ToolTip="Редактировать профиль" Style="{StaticResource EditButtonStyle}">
                                                    <materialDesign:PackIcon Kind="Pencil" Width="24" Height="24"/>
                                                </Button>
                                                <Button x:Name="ResetPasswordButton" Width="50" Height="50" Margin="0,10,0,0" Click="ResetPassword_Click" ToolTip="Сбросить пароль" Style="{StaticResource LogoutButtonStyle}">
                                                    <materialDesign:PackIcon Kind="LockReset" Width="24" Height="24"/>
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                        <!-- Поля профиля -->
                                        <StackPanel Grid.Row="1">
                                            <!-- Имя -->
                                            <Grid Margin="0,0,0,15">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <materialDesign:PackIcon Kind="Account" Width="24" Height="24" Foreground="#FF888888" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                                <TextBox x:Name="ProfileName" Grid.Column="1"
                                 Height="56"
                                 FontSize="16"
                                 Foreground="#FFFFFFFF"
                                 materialDesign:HintAssist.Hint="Имя"
                                 materialDesign:HintAssist.Foreground="#FF888888"
                                 materialDesign:HintAssist.FloatingOffset="0,-20"
                                 IsReadOnly="True"
                                 Style="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                    <TextBox.Resources>
                                                        <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                            <Setter Property="CaretBrush" Value="#FF42A5F5"/>
                                                            <Setter Property="SelectionBrush" Value="#FF42A5F5"/>
                                                            <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                                            <Setter Property="BorderBrush" Value="#FF888888"/>
                                                            <Setter Property="Background" Value="#FF2E2E2E"/>
                                                            <Setter Property="Padding" Value="0,0,10,0"/>
                                                            <Style.Triggers>
                                                                <Trigger Property="IsFocused" Value="True">
                                                                    <Setter Property="BorderBrush" Value="#FF42A5F5"/>
                                                                    <Setter Property="BorderThickness" Value="0,0,0,3"/>
                                                                </Trigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBox.Resources>
                                                </TextBox>
                                            </Grid>
                                            <!-- Телефон -->
                                            <Grid Margin="0,0,0,15">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <materialDesign:PackIcon Kind="Phone" Width="24" Height="24" Foreground="#FF888888" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                                <TextBox x:Name="ProfilePhone" Grid.Column="1"
                                 Height="56"
                                 FontSize="16"
                                 Foreground="#FFFFFFFF"
                                 materialDesign:HintAssist.Hint="Телефон"
                                 materialDesign:HintAssist.Foreground="#FF888888"
                                 materialDesign:HintAssist.FloatingOffset="0,-20"
                                 IsReadOnly="True"
                                 Style="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                    <TextBox.Resources>
                                                        <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                            <Setter Property="CaretBrush" Value="#FF42A5F5"/>
                                                            <Setter Property="SelectionBrush" Value="#FF42A5F5"/>
                                                            <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                                            <Setter Property="BorderBrush" Value="#FF888888"/>
                                                            <Setter Property="Background" Value="#FF2E2E2E"/>
                                                            <Setter Property="Padding" Value="0,0,10,0"/>
                                                            <Style.Triggers>
                                                                <Trigger Property="IsFocused" Value="True">
                                                                    <Setter Property="BorderBrush" Value="#FF42A5F5"/>
                                                                    <Setter Property="BorderThickness" Value="0,0,0,3"/>
                                                                </Trigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBox.Resources>
                                                </TextBox>
                                            </Grid>
                                            <!-- Email -->
                                            <Grid Margin="0,0,0,15">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <materialDesign:PackIcon Kind="Email" Width="24" Height="24" Foreground="#FF888888" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                                <TextBox x:Name="ProfileEmail" Grid.Column="1"
                                 Height="56"
                                 FontSize="16"
                                 Foreground="#FFFFFFFF"
                                 materialDesign:HintAssist.Hint="Email"
                                 materialDesign:HintAssist.Foreground="#FF888888"
                                 materialDesign:HintAssist.FloatingOffset="0,-20"
                                 IsReadOnly="True"
                                 Style="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                    <TextBox.Resources>
                                                        <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                            <Setter Property="CaretBrush" Value="#FF42A5F5"/>
                                                            <Setter Property="SelectionBrush" Value="#FF42A5F5"/>
                                                            <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                                            <Setter Property="BorderBrush" Value="#FF888888"/>
                                                            <Setter Property="Background" Value="#FF2E2E2E"/>
                                                            <Setter Property="Padding" Value="0,0,10,0"/>
                                                            <Style.Triggers>
                                                                <Trigger Property="IsFocused" Value="True">
                                                                    <Setter Property="BorderBrush" Value="#FF42A5F5"/>
                                                                    <Setter Property="BorderThickness" Value="0,0,0,3"/>
                                                                </Trigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBox.Resources>
                                                </TextBox>
                                            </Grid>
                                            <!-- Адрес -->
                                            <Grid Margin="0,0,0,15">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <materialDesign:PackIcon Kind="MapMarker" Width="24" Height="24" Foreground="#FF888888" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                                <TextBox x:Name="ProfileAddress" Grid.Column="1"
                                 Height="56"
                                 FontSize="16"
                                 Foreground="#FFFFFFFF"
                                 materialDesign:HintAssist.Hint="Адрес"
                                 materialDesign:HintAssist.Foreground="#FF888888"
                                 materialDesign:HintAssist.FloatingOffset="0,-20"
                                 IsReadOnly="True"
                                 Style="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                    <TextBox.Resources>
                                                        <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                            <Setter Property="CaretBrush" Value="#FF42A5F5"/>
                                                            <Setter Property="SelectionBrush" Value="#FF42A5F5"/>
                                                            <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                                            <Setter Property="BorderBrush" Value="#FF888888"/>
                                                            <Setter Property="Background" Value="#FF2E2E2E"/>
                                                            <Setter Property="Padding" Value="0,0,10,0"/>
                                                            <Style.Triggers>
                                                                <Trigger Property="IsFocused" Value="True">
                                                                    <Setter Property="BorderBrush" Value="#FF42A5F5"/>
                                                                    <Setter Property="BorderThickness" Value="0,0,0,3"/>
                                                                </Trigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBox.Resources>
                                                </TextBox>
                                            </Grid>
                                            <!-- Дата регистрации -->
                                            <Grid Margin="0,0,0,15">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <materialDesign:PackIcon Kind="Calendar" Width="24" Height="24" Foreground="#FF888888" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                                <TextBox x:Name="ProfileRegistrationDate" Grid.Column="1"
                                 Height="56"
                                 FontSize="16"
                                 Foreground="#FFFFFFFF"
                                 materialDesign:HintAssist.Hint="Дата регистрации"
                                 materialDesign:HintAssist.Foreground="#FF888888"
                                 materialDesign:HintAssist.FloatingOffset="0,-20"
                                 IsReadOnly="True"
                                 Style="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                    <TextBox.Resources>
                                                        <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}">
                                                            <Setter Property="CaretBrush" Value="#FF42A5F5"/>
                                                            <Setter Property="SelectionBrush" Value="#FF42A5F5"/>
                                                            <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                                            <Setter Property="BorderBrush" Value="#FF888888"/>
                                                            <Setter Property="Background" Value="#FF2E2E2E"/>
                                                            <Setter Property="Padding" Value="0,0,10,0"/>
                                                            <Style.Triggers>
                                                                <Trigger Property="IsFocused" Value="True">
                                                                    <Setter Property="BorderBrush" Value="#FF42A5F5"/>
                                                                    <Setter Property="BorderThickness" Value="0,0,0,3"/>
                                                                </Trigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBox.Resources>
                                                </TextBox>
                                            </Grid>
                                        </StackPanel>
                                        <!-- Кнопки сохранения и отмены редактирования -->
                                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,20">
                                            <Button x:Name="SaveEditButton" Content="Сохранить" Width="120" Height="40" Visibility="Collapsed" Click="SaveEdit_Click" Style="{StaticResource ActionButtonStyle}"/>
                                            <Button x:Name="CancelEditButton" Content="Отмена" Width="120" Height="40" Margin="10,0,0,0" Visibility="Collapsed" Click="CancelEdit_Click" Style="{StaticResource CancelButtonStyle}"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </ScrollViewer>
                        </Grid>
                    </Grid>
                </Grid>
            </Grid>
        </Border>

        <!-- Snackbar -->
        <materialDesign:Snackbar x:Name="Snackbar" Grid.ColumnSpan="2" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,20"/>
    </Grid>
</Window>